{%extends 'base.html'%}
{%block title%}Group{%endblock title%}
{%block body%}
<div class="container">

<h2>Chat app in Django</h1>
<div class="row justify-content-around">
<button class="btn btn-success text-white"><a href="/logout" class="text-white">Logout</a></button>
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
Add Group
</button>

</div>
{%for group in groups%}
<div class="card mb-3 mt-5">
  <a href="/chat?group={{group.name}}">
  <div class="card-body text-decoration-none text-black-50">
    <blockquote class=" mb-0 text-decoration-none">
      <p class="text-decoration-none">{{group.name}}</p>
  
    </blockquote>
  </div>
  </a>
</div>
{%endfor%}
</div>

<div class="modal" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add Group</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
       <form method="post" action="/group/add">
       {%csrf_token%}
  <div class="form-group">
    <label for="group_name">Name:</label>
    <input type="tetx" class="form-control" id="group_name" name="group_name">
    
  </div>
 
 

      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary" >Save changes</button>
      </div>
      </form>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
function createGroup(){
let name=document.getElementById('group_name').value
let xhttp = new XMLHttpRequest();
xhttp.onreadystatechange=function(){
if(this.readyState==4 && xhttp.status==200){
console.log(xhttp.response)
}
}
xhttp.open('POST','http://localhost:9000/group/add',true)
xhttp.setRequestHeader('Content-Type':'application/json')
xhttp.send(JSON.stringify({'group_name':name}))

}

</script>

{%endblock body%}
